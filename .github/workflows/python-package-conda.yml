name: Python Package using Conda

on: [push]

jobs:
  build-linux:
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 5

    steps:
    - name: Checkout
      uses: actions/checkout@v2.7.0
      with:
        repository: ${{ github.repository }}

    
    - name: Setup HashiCorp Packer
      # You may pin to the exact commit or the version.
      # uses: hashicorp/setup-packer@ae6b3ed3bec089bbfb576ab7d714df7cbc4b88a4
      uses: hashicorp/setup-packer@v2.0.0
      with:
        # The Packer version to install and add to PATH.
        version: latest
    - name: Packer build
      # You may pin to the exact commit or the version.
      # uses: riznob/packer-build-action@6fc818476da47cc44d89b7695ee38b4954188d23
      uses: riznob/packer-build-action@v1.5
      with:
        # Packer template file to use for packer build
        templateFile: 01-jenkins-setup/jenkins-agent.pkr.hcl

      
